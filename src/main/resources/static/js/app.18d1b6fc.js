(function(e){function t(t){for(var o,s,a=t[0],l=t[1],c=t[2],d=0,p=[];d<a.length;d++)s=a[d],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&p.push(r[s][0]),r[s]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);u&&u(t);while(p.length)p.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],o=!0,a=1;a<n.length;a++){var l=n[a];0!==r[l]&&(o=!1)}o&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var o={},r={app:0},i=[];function s(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=o,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)s.d(n,o,function(t){return e[t]}.bind(null,o));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],l=a.push.bind(a);a.push=t,a=a.slice();for(var c=0;c<a.length;c++)t(a[c]);var u=l;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"07b3":function(e,t,n){},"0805":function(e,t,n){"use strict";var o=n("c6be"),r=n.n(o);r.a},1:function(e,t){},"22de":function(e,t,n){"use strict";var o=n("8319"),r=n.n(o);r.a},"2f0f":function(e,t,n){"use strict";var o=n("6b37"),r=n.n(o);r.a},"3c70":function(e,t,n){e.exports=n.p+"img/user_icon.7ea4af7d.png"},"56d7":function(e,t,n){"use strict";n.r(t);n("45fc"),n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),r=n("28dd"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},s=[],a=n("2877"),l={},c=Object(a["a"])(l,i,s,!1,null,null,null),u=c.exports,d=n("8c4f"),p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("user-inf"),n("br"),n("point-list",{staticClass:"image",attrs:{points:e.points}})],1)},m=[],v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"content",staticStyle:{width:"100%",display:"inline-block"}},[n("div",{staticClass:"inline form",attrs:{align:"center"}},[n("point-form",{attrs:{points:e.localPoints,"clear-points":e.clearPoints}})],1),n("div",{staticClass:"inline canvas",attrs:{align:"center"}},[n("point-canvas",{attrs:{points:e.localPoints}})],1)]),n("div",{staticClass:"table",attrs:{align:"center"}},[n("point-table",{attrs:{points:e.localPoints}}),n("button",{on:{click:e.toLogin}},[e._v("На стартовую")])],1)])},f=[],h=(n("4160"),n("159b"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("span",[e._v("X")]),n("br"),n("input",{directives:[{name:"model",rawName:"v-model",value:e.x,expression:"x"}],staticStyle:{width:"30%"},attrs:{type:"text",placeholder:"{-5 ... 3}"},domProps:{value:e.x},on:{input:function(t){t.target.composing||(e.x=t.target.value)}}}),n("br"),n("span",[e._v("Y")]),n("br"),n("input",{directives:[{name:"model",rawName:"v-model",value:e.y,expression:"y"}],staticStyle:{width:"30%"},attrs:{type:"text",placeholder:"{-5 ... 5}"},domProps:{value:e.y},on:{input:function(t){t.target.composing||(e.y=t.target.value)}}}),n("br"),n("span",[e._v("R")]),n("br"),n("input",{directives:[{name:"model",rawName:"v-model",value:e.r,expression:"r"}],staticStyle:{width:"30%"},attrs:{type:"text",placeholder:"{0 ... 5}"},domProps:{value:e.r},on:{input:[function(t){t.target.composing||(e.r=t.target.value)},e.changeR]}}),e._v(" "),n("br"),n("button",{staticStyle:{"margin-top":"3%"},on:{click:e.check}},[e._v("Проверить")]),n("br"),n("button",{staticStyle:{margin:"2%"},on:{click:e.del}},[e._v("Удалить точки")])])}),g=[],y=(n("a9e3"),{props:["points","clearPoints"],name:"point-form",data:function(){return{x:"",y:"",r:"",url:""}},methods:{check:function(){var e=this,t=this.x,n=this.y,o=this.r;if(isNaN(Number(n))||isNaN(Number(t))||isNaN(Number(o)))this.errorView();else if(t<=3&&t>=-5&&n<=5&&n>=-5&&o>=0&&o<=5){this.normalView();var r={x:this.x,y:this.y,r:this.r},i=this.$resource(this.url+"/point{/id}",{Headers:{Authorization:"Bearer_"+localStorage.getItem("jwt")}});i.save({},r).then((function(t){return t.json().then((function(t){e.points.push(t),He.$emit("drawPoint",t),e.x="",e.y="",e.r=""}))}))}else this.errorView()},del:function(){var e=this,t=this.$resource(this.url+"/point{/id}",{Headers:{Authorization:"Bearer_"+localStorage.getItem("jwt")}});t.delete().then((function(t){t.ok&&(e.clearPoints(),He.$emit("del",{}))}))},changeR:function(){He.$emit("changeR",this.r)},normalView:function(){var e=document.getElementsByTagName("input");e[0].style.border="2px solid lightgrey",e[1].style.border="2px solid lightgrey",e[2].style.border="2px solid lightgrey"},errorView:function(){var e=document.getElementsByTagName("input");e[0].style.border="2px solid red",e[1].style.border="2px solid red",e[2].style.border="2px solid red"}}}),b=y,w=Object(a["a"])(b,h,g,!1,null,"4a777cd7",null),_=w.exports,x=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("table",[e._m(0),e._l(e.points,(function(e){return n("table-row",{key:e.id,attrs:{point:e}})}))],2)])},T=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("tr",[n("td",[e._v("Id")]),n("td",[e._v("X")]),n("td",[e._v("Y")]),n("td",[e._v("R")]),n("td",[e._v("Входит/Не входит")])])}],k=function(){var e=this,t=e.$createElement,n=e._self._c||t;return-1!=e.point.r?n("tr",[n("td",[e._v(e._s(e.point.id))]),n("td",[e._v(e._s(e.point.x))]),n("td",[e._v(e._s(e.point.y))]),n("td",[e._v(e._s(e.point.r))]),n("td",[e._v(e._s(e.point.hit))])]):n("tr",[n("td",{attrs:{colspan:"5"}},[e._v("Неверные данные")])])},P=[],j={name:"table-row",props:["point"],created:function(){this.point.hit?this.point.hit="Входит":this.point.hit="Не входит"}},E=j,$=Object(a["a"])(E,k,P,!1,null,"48a5829e",null),S=$.exports,C={components:{TableRow:S},props:["points"],name:"point-table"},O=C,N=(n("ce35"),Object(a["a"])(O,x,T,!1,null,"a7828a78",null)),I=N.exports,B=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("canvas",{attrs:{id:"canvas",width:"350",height:"350"},on:{click:function(t){return e.sendPoint(t)}}}),e.message?n("p",{staticStyle:{color:"red"}},[e._v("Вы ввели недопустимый радиус")]):e._e()])},V=[],M=(n("a4d3"),n("e01a"),n("d28b"),n("cb29"),n("b680"),n("d3b7"),n("3ca3"),n("ddb0"),new Path2D);M.moveTo(175,348),M.lineTo(175,2),M.moveTo(2,175),M.lineTo(348,175);var R=new Path2D;R.moveTo(175,11),R.lineTo(168,11),R.lineTo(175,1),R.lineTo(182,11),R.lineTo(175,11);var U=new Path2D;U.moveTo(339,175),U.lineTo(339,168),U.lineTo(349,175),U.lineTo(339,182),U.lineTo(339,175);var D=new Path2D;D.moveTo(144,172),D.lineTo(144,178),D.moveTo(113,172),D.lineTo(113,178),D.moveTo(82,172),D.lineTo(82,178),D.moveTo(51,172),D.lineTo(51,178),D.moveTo(20,172),D.lineTo(20,178),D.moveTo(206,172),D.lineTo(206,178),D.moveTo(237,172),D.lineTo(237,178),D.moveTo(268,172),D.lineTo(268,178),D.moveTo(299,172),D.lineTo(299,178),D.moveTo(330,172),D.lineTo(330,178);var A=new Path2D;function F(){var e=document.getElementById("canvas"),t=e.getContext("2d");t.strokeStyle="white",t.fillStyle="white",t.font="12px cursive",t.stroke(M),t.fill(R),t.fillText("Y",184,14),t.fill(U),t.fillText("X",339,165),t.stroke(D),t.fillText("1",203,169),t.stroke(A),t.fillText("1",180,148)}function H(e){var t=document.getElementById("canvas"),n=t.getContext("2d");n.strokeStyle="#EC1947",n.fillStyle="#EC1947",n.clearRect(0,0,t.width,t.height),n.beginPath(),n.fillRect(175-31*e/2,175,31*e/2,31*e),n.fill(),n.moveTo(175,175),n.lineTo(175-31*e/2,175),n.lineTo(175,175-31*e/2),n.lineTo(175,175),n.fill(),n.arc(175,175,31*e,3*Math.PI/2,0),n.fill(),F()}function z(e,t,n){var o;o=document.getElementById("canvas");var r=o.getContext("2d");r.fillStyle=n,r.beginPath(),r.moveTo(e,t),r.arc(e,t,2,-Math.PI,Math.PI),r.fill()}function L(){var e=document.getElementById("canvas"),t=e.getContext("2d");t.clearRect(0,0,e.width,e.height),F(),H()}function X(e,t,n){var o;return e>=0&&t>=0&&Math.sqrt(e*e+t*t)<=n?o=!0:e<=0&&t>=0&&t<=e+n/2?o=!0:e<=0&&t<=0&&e>=-n/2&&t>=-n&&(o=!0),o}function Y(e,t){var n=!0,o=!1,r=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var a=i.value,l=a.x,c=a.y,u=31*l+175,d=31*-c+175;X(l,c,t)?z(u,d,"#32CD32"):z(u,d,"#1e51a4")}}catch(p){o=!0,r=p}finally{try{n||null==s.return||s.return()}finally{if(o)throw r}}}A.moveTo(172,206),A.lineTo(178,206),A.moveTo(172,237),A.lineTo(178,237),A.moveTo(172,268),A.lineTo(178,268),A.moveTo(172,299),A.lineTo(178,299),A.moveTo(172,330),A.lineTo(178,330),A.moveTo(172,144),A.lineTo(178,144),A.moveTo(172,113),A.lineTo(178,113),A.moveTo(172,82),A.lineTo(178,82),A.moveTo(172,51),A.lineTo(178,51),A.moveTo(172,20),A.lineTo(178,20);var q={props:["points"],name:"point-canvas",data:function(){return{x:"",y:"",r:"3",message:!1}},mounted:function(){var e=this;F(),H(3);var t=this.$resource("/point{/id}",{Headers:{Authorization:"Bearer_"+localStorage.getItem("jwt")}});t.get().then((function(t){return t.json().then((function(t){Y(t,e.r)}))}))},created:function(){var e=this;He.$on("drawPoint",(function(e){var t=31*e.x+175,n=31*-e.y+175;e.hit?z(t,n,"#32CD32"):z(t,n,"#1e51a4")})),He.$on("changeR",(function(t){t<=5&&t>=0?(H(t),e.r=t,Y(e.points,t)):e.r=t})),He.$on("del",(function(t){L(),F(),e.r>=0&&e.r<=5?H(e.r):e.r>5?H(5):H(0)}))},methods:{sendPoint:function(e){var t=this;if(this.r>=0&&this.r<=5){this.message=!1,this.x=e.offsetX,this.y=e.offsetY;var n=((this.x-175)/31).toFixed(2),o=(-(this.y-175)/31).toFixed(2),r={x:n,y:o,r:this.r},i=this.$resource("/point{/id}",{Headers:{Authorization:"Bearer_"+localStorage.getItem("jwt")}});i.save({},r).then((function(e){return e.json().then((function(e){t.points.push(e),e.hit?z(t.x,t.y,"#32CD32"):z(t.x,t.y,"#1e51a4")}))}))}else this.message=!0}}},W=q,J=Object(a["a"])(W,B,V,!1,null,"95184b66",null),G=J.exports,K={components:{PointCanvas:G,PointTable:I,PointForm:_},props:["points"],name:"point-list",data:function(){return{localPoints:this.points,url:""}},created:function(){var e=this;null==localStorage.getItem("jwt")&&this.$router.push("/");var t=this.$resource(this.url+"/point{/id}",{Headers:{Authorization:"Bearer_"+localStorage.getItem("jwt")}});t.get().then((function(t){return t.json().then((function(t){return t.forEach((function(t){return e.points.push(t)}))}))}))},methods:{clearPoints:function(){this.localPoints=[]},toLogin:function(){this.$router.push("/")}}},Q=K,Z=(n("0805"),Object(a["a"])(Q,v,f,!1,null,"473a2bc1",null)),ee=Z.exports,te=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("div",{staticClass:"user-inf"},[o("img",{staticClass:"inline",attrs:{src:n("3c70"),width:"40"}}),o("p",{staticClass:"inline login",staticStyle:{"vertical-align":"10px"}},[e._v(e._s(e.login))]),o("br"),o("button",{staticClass:"button",on:{click:e.logout}},[e._v("logout")])])])},ne=[],oe={data:function(){return{login:localStorage.getItem("user")}},name:"user-inf",methods:{logout:function(){localStorage.removeItem("jwt"),localStorage.removeItem("user"),this.$router.push("/")}}},re=oe,ie=(n("ecab"),Object(a["a"])(re,te,ne,!1,null,"64518d94",null)),se=ie.exports,ae={components:{UserInf:se,PointList:ee},data:function(){return{points:[]}}},le=ae,ce=(n("22de"),Object(a["a"])(le,p,m,!1,null,null,null)),ue=ce.exports,de=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("login-header"),n("login-form",{staticClass:"loginForm"})],1)},pe=[],me=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{align:"center"}},[n("div",{staticClass:"auth"},[n("span",[e._v("Логин")]),e._v(" "),n("br"),n("input",{directives:[{name:"model",rawName:"v-model",value:e.login,expression:"login"}],staticClass:"login",attrs:{type:"text"},domProps:{value:e.login},on:{input:[function(t){t.target.composing||(e.login=t.target.value)},e.normalView],keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.sendUser(t)}}}),n("br"),n("span",[e._v("Пароль")]),n("br"),n("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"text"},domProps:{value:e.password},on:{input:[function(t){t.target.composing||(e.password=t.target.value)},e.normalView],keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.sendUser(t)}}}),n("br"),n("button",{on:{click:e.sendUser}},[e._v("Войти")]),n("br"),n("button",{attrs:{id:"registration"},on:{click:e.show}},[e._v("Регистрация")]),n("div",[n("message",{attrs:{message:e.message,color:e.color}})],1)]),n("div",{staticClass:"onMain"},[n("button",{on:{click:e.toMain}},[e._v("На главную")])]),n("div",{staticClass:"modal",attrs:{id:"modalWindow"}},[n("div",{staticClass:"modal-content"},[n("registration-form",{attrs:{close:e.close}})],1)])])},ve=[],fe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("p",{style:e.color,attrs:{id:"message"}},[e._v(e._s(e.message))]),"Вы успешно зарегистрировались"===e.message?n("p",{style:e.color},[e._v("Логин: "+e._s(e.login))]):e._e(),"Вы успешно зарегистрировались"===e.message?n("p",{style:e.color},[e._v("Пароль: "+e._s(e.password))]):e._e()])},he=[],ge={props:["message","color","login","password"],name:"message"},ye=ge,be=Object(a["a"])(ye,fe,he,!1,null,"5d58df8c",null),we=be.exports,_e=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"form"},[n("div",{attrs:{align:"right"}},[n("span",{staticClass:"close",on:{click:this.close}},[e._v("×")])]),n("h2",{staticStyle:{"font-family":"cursive"}},[e._v("Регистрация")]),n("span",[e._v("Логин")]),n("br"),n("input",{directives:[{name:"model",rawName:"v-model",value:e.login,expression:"login"}],attrs:{type:"text"},domProps:{value:e.login},on:{input:[function(t){t.target.composing||(e.login=t.target.value)},e.normalView],keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.sendNewUser(t)}}}),n("br"),n("span",[e._v("Пароль")]),n("br"),n("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"text"},domProps:{value:e.password},on:{input:[function(t){t.target.composing||(e.password=t.target.value)},e.normalView],keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.sendNewUser(t)}}}),n("br"),n("button",{on:{click:e.sendNewUser}},[e._v("Зарегистрироваться")])]),n("div",[n("message",{attrs:{message:e.message,login:e.login,password:e.password,color:e.color}})],1)])},xe=[],Te={props:["close"],name:"registration-form",components:{Message:we},data:function(){return{login:"",password:"",message:"",color:"",url:""}},methods:{sendNewUser:function(){var e=this,t={login:this.login,password:this.password};""===this.login||""===this.password?(this.message="Необходимо заполнить оба поля",this.color="color: red",this.errorView()):this.$http.post(this.url+"/auth/register",t).then((function(t){t.json().then((function(t){e.message="Вы успешно зарегистрировались",e.color="color: green"}))}),(function(t){401===t.status&&(e.message="Пользователь с таким логином уже зарегистрирован",e.color="color: red",e.errorView())}))},normalView:function(){var e=document.getElementsByTagName("input");e[2].style.border="2px solid lightgrey",e[3].style.border="2px solid lightgrey",this.message=""},errorView:function(){var e=document.getElementsByTagName("input");e[2].style.border="2px solid red",e[3].style.border="2px solid red"}}},ke=Te,Pe=(n("2f0f"),Object(a["a"])(ke,_e,xe,!1,null,"646ee427",null)),je=Pe.exports,Ee={name:"login-form",components:{RegistrationForm:je,Message:we},data:function(){return{login:"",password:"",token:"",message:"",color:"",url:""}},methods:{sendUser:function(){var e=this,t={login:this.login,password:this.password};""===this.login||""===this.password?(this.message="Необходимо заполнить оба поля",this.color="color: red",this.errorView()):this.$http.post(this.url+"/auth/login",t).then((function(t){t.json().then((function(t){localStorage.setItem("jwt",t.token),localStorage.setItem("user",t.login),e.$router.push("main")}))}),(function(t){401===t.status&&(e.message="Неверный логин или пароль",e.color="color: red",e.errorView())}))},show:function(){document.getElementById("modalWindow").style.display="block"},close:function(){document.getElementById("modalWindow").style.display="none"},toMain:function(){this.$router.push("main")},normalView:function(){var e=document.getElementsByTagName("input");e[0].style.border="2px solid lightgrey",e[1].style.border="2px solid lightgrey",this.message=""},errorView:function(){var e=document.getElementsByTagName("input");e[0].style.border="2px solid red",e[1].style.border="2px solid red"}}},$e=Ee,Se=(n("7866"),Object(a["a"])($e,me,ve,!1,null,"30451ae8",null)),Ce=Se.exports,Oe=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},Ne=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{align:"center"}},[n("h1",[e._v("Лабораторная работа 4")]),n("h2",[e._v("Вотинцев Евгений Вячеславович")]),n("h2",[e._v("Группа: P3202")]),n("h2",[e._v("Вариант: 20217")])])}],Ie={name:"login-header"},Be=Ie,Ve=Object(a["a"])(Be,Oe,Ne,!1,null,"284bae64",null),Me=Ve.exports,Re={components:{LoginHeader:Me,LoginForm:Ce}},Ue=Re,De=Object(a["a"])(Ue,de,pe,!1,null,"75cf18df",null),Ae=De.exports;o["a"].use(d["a"]);var Fe=new d["a"]({routes:[{path:"/main",name:"main",component:ue,meta:{requiresAuth:!0}},{path:"/",name:"login",component:Ae,meta:{guest:!0}}]});n.d(t,"eventBus",(function(){return He})),o["a"].config.productionTip=!1,o["a"].use(r["a"]);var He=new o["a"];new o["a"]({router:Fe,render:function(e){return e(u)}}).$mount("#app"),Fe.beforeEach((function(e,t,n){e.matched.some((function(e){return e.meta.requiresAuth}))?null==localStorage.getItem("jwt")?(console.log("to main without jwt"),n({path:"/"})):(console.log("to main with jwt"),n()):e.matched.some((function(e){return e.meta.guest}))&&(console.log("to login "),n())}))},"6b37":function(e,t,n){},7866:function(e,t,n){"use strict";var o=n("07b3"),r=n.n(o);r.a},8319:function(e,t,n){},b5b6:function(e,t,n){},c6be:function(e,t,n){},ce35:function(e,t,n){"use strict";var o=n("b5b6"),r=n.n(o);r.a},dc12:function(e,t,n){},ecab:function(e,t,n){"use strict";var o=n("dc12"),r=n.n(o);r.a}});
//# sourceMappingURL=app.18d1b6fc.js.map